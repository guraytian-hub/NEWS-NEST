<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>NewsNest | Weekly Awards</title>
<link href="https://fonts.googleapis.com/css2?family=Poppins:wght@600&family=Roboto&display=swap" rel="stylesheet">
<style>
body { font-family:'Roboto',sans-serif; margin:0; background:#FAF5F0; color:#333; overflow-x:hidden; position:relative; }
header { background:#6DD3CE; color:#fff; text-align:center; padding:1.5rem; font-family:'Poppins',sans-serif; font-size:2.5rem; letter-spacing:1px; position:relative; z-index:2; }
nav { display:flex; justify-content:center; gap:1rem; padding:1rem; background:#FF9A8B; flex-wrap:wrap; position:relative; z-index:2;}
.nav-btn { background: linear-gradient(135deg, #FF6B6B, #FFD93D); color: #fff; border:none; padding:0.7rem 1.5rem; border-radius:12px; font-weight:600; cursor:pointer; text-decoration:none; box-shadow:0 4px 15px rgba(255,107,107,0.4); transition:all 0.3s ease; }
.nav-btn:hover { transform:translateY(-2px); box-shadow:0 6px 20px rgba(255,107,107,0.6); background: linear-gradient(135deg, #FFD93D, #FF6B6B); }

main { max-width:1000px; margin:2rem auto; padding:0 1rem; position:relative; z-index:2; }
.news-card { display:flex; flex-direction:row; background:#fff; padding:1.5rem; border-radius:12px; box-shadow:0 4px 10px rgba(0,0,0,0.05); margin-bottom:2rem; gap:1rem; position:relative; cursor:pointer; }
.news-card img { width:280px; height:180px; object-fit:cover; border-radius:12px; }
.news-content h3 { font-family:'Poppins',sans-serif; color:#6DD3CE; margin-bottom:0.5rem; font-size:1.5rem; }
.news-content .news-author, .news-content .news-views, .news-content .news-date { font-size:0.9rem; font-style:italic; color:#555; margin-bottom:0.5rem; }
.news-content .news-category { font-size:0.9rem; font-weight:600; color:#FF6F61; margin-bottom:0.5rem; }
.news-content p { margin-bottom:0.5rem; font-size:1.1rem; }
.news-video { margin-top:1rem; width:100%; max-height:400px; }

/* Prize + medal */
.rank-medal { font-size:1.3rem; margin-right:6px; }

/* Likes */
.likes-btn { background: linear-gradient(135deg, #FF6B6B, #FFD93D); color: #fff; border:none; padding:0.4rem 0.8rem; border-radius:8px; cursor:pointer; font-weight:600; margin-top:0.5rem; box-shadow:0 4px 10px rgba(255,107,107,0.4); transition:0.3s; }
.likes-btn:hover { transform:translateY(-2px); box-shadow:0 6px 15px rgba(255,107,107,0.6); background: linear-gradient(135deg, #FFD93D, #FF6B6B); }
.likes-info { margin-top:0.4rem; font-size:0.9rem; color:#444; font-weight:500; }

footer { text-align:center; padding:1rem; background:#6DD3CE; color:#fff; margin-top:2rem; font-size:0.9rem; }

@media(max-width:768px){ .news-card{flex-direction:column;} .news-card img{width:100%; height:auto; margin-bottom:1rem;} }

/* --- Expand/collapse --- */
.news-details { display: none; }
.news-card.expanded .news-details { display: block; }

/* --- Bubbles --- */
.bubble { position:absolute; border-radius:50%; opacity:0.3; pointer-events:none; animation: drift linear infinite; }
@keyframes drift {
  0% { transform: translate(0,0) rotate(0deg); opacity:0.3; }
  50% { transform: translate(calc(100vw - 50%), -50vh) rotate(180deg); opacity:0.2; }
  100% { transform: translate(-50vw, -100vh) rotate(360deg); opacity:0.3; }
}
</style>
</head>
<body>

<header>NewsNest Weekly Awards</header>

<nav>
<a href="home.html" class="nav-btn">Home</a>
<a href="explore.html" class="nav-btn">Explore</a>
<a href="search.html" class="nav-btn">Search</a>
<a href="CreateNews.html" class="nav-btn">Create News</a>
<a href="ranking.html" class="nav-btn">Ranking</a>
<a href="weekly-award.html" class="nav-btn">Weekly Awards</a>
<a href="login.html" class="nav-btn">Login</a>
</nav>

<main>
<section id="contest-news"></section>
</main>

<footer>&copy; 2025 NewsNest | All Readers Are Authors</footer>

<script>
  const contestContainer = document.getElementById('contest-news');
  const PRIZE_POOL = 1_000_000_000; // weekly prize pool
  
  function formatLikes(num){
    if(num>=1e12) return (num/1e12).toFixed(1)+'T';
    if(num>=1e9) return (num/1e9).toFixed(1)+'B';
    if(num>=1e6) return (num/1e6).toFixed(1)+'M';
    if(num>=1e3) return (num/1e3).toFixed(1)+'k';
    return num;
  }
  function formatMoney(num){
    if(num>=1e9) return '‚Ç±'+(num/1e9).toFixed(2)+'B';
    if(num>=1e6) return '‚Ç±'+(num/1e6).toFixed(2)+'M';
    if(num>=1e3) return '‚Ç±'+(num/1e3).toFixed(1)+'k';
    return '‚Ç±'+num;
  }
  
  function loadContestNews(){
    contestContainer.innerHTML='';
    let allNews = JSON.parse(localStorage.getItem('newsNestArticles')||'[]');
    if(allNews.length===0){ 
      contestContainer.innerHTML='<p style="text-align:center">No news yet! Create some news first.</p>'; 
      return; 
    }
  
    const totalLikes = allNews.reduce((sum,n)=>sum+(n.likes||0),0) || 1;
    allNews.sort((a,b)=>(b.likes||0) - (a.likes||0));
  
    allNews.forEach((n,i)=>{
      const likes = n.likes||0;
      const percent = (likes/totalLikes*100).toFixed(1);
      const prize = PRIZE_POOL * (likes/totalLikes);
      createNewsCard(n, i+1, likes, percent, prize, contestContainer, i);
    });
  }
  
  function createNewsCard(news, rank, likes, percent, prize, container, index){
    const medals = {1:'üèÜ', 2:'ü•à', 3:'ü•â'};
    const card=document.createElement('div');
    card.className='news-card';
    card.innerHTML=`
      <img src="${news.image||'https://via.placeholder.com/280x180'}">
      <div class="news-content">
        <h3><span class="rank-medal">${medals[rank]||''}</span> ${rank}. ${news.title||'Untitled'}</h3>
        <div class="news-details">
          <div class="news-author">By ${news.author||'Unknown'}</div>
          <div class="news-category">Category: ${news.category||'N/A'}</div>
          <div class="news-date">Published: ${news.date||'N/A'}</div>
          <div class="news-views">Views: ${news.views||0}</div>
          <p>${news.content||''}</p>
          ${news.video?`<video class="news-video" controls><source src="${news.video}" type="video/mp4"></video>`:''}
          <button class="likes-btn" onclick="likeNews(${index})">
            üëç <span data-raw="${likes}">${formatLikes(likes)}</span> Likes
          </button>
          <div class="likes-info">
            ${percent}% of all likes ‚Üí Prize: <strong>${formatMoney(prize)}</strong>
          </div>
        </div>
      </div>
    `;
  
    card.addEventListener('click', e=>{
      if(e.target.tagName!=="BUTTON" && e.target.tagName!=="VIDEO"){ 
        card.classList.toggle('expanded');
      }
    });
  
    container.appendChild(card);
  }
  
  function likeNews(index){
    let allNews=JSON.parse(localStorage.getItem('newsNestArticles')||'[]');
    allNews[index].likes=(allNews[index].likes||0)+1;
    localStorage.setItem('newsNestArticles', JSON.stringify(allNews));
    loadContestNews();
  }
  
  function createBubbles(count){
    for(let i=0;i<count;i++){
      const bubble=document.createElement('div');
      bubble.className='bubble';
      bubble.style.width=(10+Math.random()*30)+'px';
      bubble.style.height=(10+Math.random()*30)+'px';
      bubble.style.background='hsla('+(Math.random()*360)+',70%,80%,0.3)';
      bubble.style.left=Math.random()*100+'vw';
      bubble.style.top=Math.random()*100+'vh';
      bubble.style.animationDuration=(10+Math.random()*20)+'s';
      document.body.appendChild(bubble);
    }
  }
  
  window.onload=()=>{ createBubbles(20); loadContestNews(); };
  </script>
  
</body>
</html>

